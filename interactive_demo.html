<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Texas Real Estate Intelligence | Executive Analytics Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <style>
        /* Design System Variables - Based on Pinterest Aesthetic */
        :root {
            /* Monochromatic Core Palette */
            --color-black: #000000;
            --color-white: #FFFFFF;
            --color-gray-50: #FAFAFA;
            --color-gray-100: #F5F5F5;
            --color-gray-200: #EEEEEE;
            --color-gray-300: #E0E0E0;
            --color-gray-400: #BDBDBD;
            --color-gray-500: #9E9E9E;
            --color-gray-600: #757575;
            --color-gray-700: #616161;
            --color-gray-800: #424242;
            --color-gray-900: #212121;
            
            /* Strategic Accent Colors - Enhanced */
            --color-accent-primary: #E53E3E;
            --color-accent-blue: #3182CE;
            --color-accent-green: #38A169;
            --color-accent-orange: #ED8936;
            --color-accent-purple: #805AD5;
            --color-accent-teal: #319795;
            --color-accent-indigo: #5A67D8;
            
            /* Gradient Backgrounds */
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-success: linear-gradient(135deg, #667eea 0%, #38A169 100%);
            --gradient-chart: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-card: linear-gradient(135deg, #ffeef8 0%, #f8fafc 100%);
            
            /* Typography System */
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-weight-light: 300;
            --font-weight-regular: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            --font-weight-extrabold: 800;
            --font-weight-black: 900;
            
            /* Typography Scale */
            --text-xs: 0.75rem;      /* 12px */
            --text-sm: 0.875rem;     /* 14px */
            --text-base: 1rem;       /* 16px */
            --text-lg: 1.125rem;     /* 18px */
            --text-xl: 1.25rem;      /* 20px */
            --text-2xl: 1.5rem;      /* 24px */
            --text-3xl: 1.875rem;    /* 30px */
            --text-4xl: 2.25rem;     /* 36px */
            --text-5xl: 3rem;        /* 48px */
            --text-6xl: 3.75rem;     /* 60px */
            
            /* Spacing System - 8pt Grid */
            --spacing-1: 0.125rem;   /* 2px */
            --spacing-2: 0.25rem;    /* 4px */
            --spacing-3: 0.375rem;   /* 6px */
            --spacing-4: 0.5rem;     /* 8px */
            --spacing-5: 0.625rem;   /* 10px */
            --spacing-6: 0.75rem;    /* 12px */
            --spacing-8: 1rem;       /* 16px */
            --spacing-10: 1.25rem;   /* 20px */
            --spacing-12: 1.5rem;    /* 24px */
            --spacing-16: 2rem;      /* 32px */
            --spacing-20: 2.5rem;    /* 40px */
            --spacing-24: 3rem;      /* 48px */
            --spacing-32: 4rem;      /* 64px */
            --spacing-40: 5rem;      /* 80px */
            --spacing-48: 6rem;      /* 96px */
            --spacing-64: 8rem;      /* 128px */
            
            /* Shadow System */
            --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            
            /* Border Radius */
            --radius-sm: 0.125rem;    /* 2px */
            --radius-md: 0.375rem;    /* 6px */
            --radius-lg: 0.5rem;      /* 8px */
            --radius-xl: 0.75rem;     /* 12px */
            --radius-2xl: 1rem;       /* 16px */
            
            /* Transitions */
            --transition-fast: 150ms ease-out;
            --transition-base: 250ms ease-out;
            --transition-slow: 350ms ease-out;
        }

        /* Reset and Base Styles */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-primary);
            font-weight: var(--font-weight-regular);
            color: var(--color-gray-900);
            background-color: var(--color-white);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--color-gray-200);
        }

        .navbar-container {
            max-width: 1440px;
            margin: 0 auto;
            padding: var(--spacing-4) var(--spacing-8);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-logo {
            font-size: var(--text-xl);
            font-weight: var(--font-weight-black);
            color: var(--color-black);
            text-decoration: none;
            letter-spacing: -0.02em;
        }

        .navbar-menu {
            display: flex;
            list-style: none;
            gap: var(--spacing-8);
        }

        .navbar-link {
            color: var(--color-gray-600);
            text-decoration: none;
            font-weight: var(--font-weight-medium);
            font-size: var(--text-sm);
            transition: var(--transition-fast);
        }

        .navbar-link:hover {
            color: var(--color-black);
        }

        /* Hero Section */
        .hero {
            padding-top: var(--spacing-24);
            padding-bottom: var(--spacing-32);
            background: var(--color-white);
        }

        .hero-container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 var(--spacing-8);
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .hero-title {
            font-size: var(--text-6xl);
            font-weight: var(--font-weight-black);
            color: var(--color-black);
            letter-spacing: -0.04em;
            margin-bottom: var(--spacing-6);
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: var(--text-xl);
            font-weight: var(--font-weight-regular);
            color: var(--color-gray-600);
            margin-bottom: var(--spacing-12);
        }

        .hero-metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-8);
            margin-top: var(--spacing-16);
        }

        .metric-item {
            text-align: center;
            padding: var(--spacing-8);
        }

        .metric-value {
            display: block;
            font-size: var(--text-4xl);
            font-weight: var(--font-weight-black);
            color: var(--color-black);
            letter-spacing: -0.02em;
        }

        .metric-label {
            font-size: var(--text-sm);
            font-weight: var(--font-weight-medium);
            color: var(--color-gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: var(--spacing-2);
        }

        /* Dashboard Container */
        .dashboard {
            padding: var(--spacing-32) 0;
            background: var(--color-gray-50);
        }

        .dashboard-container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 var(--spacing-8);
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: var(--spacing-20);
        }

        .dashboard-title {
            font-size: var(--text-4xl);
            font-weight: var(--font-weight-black);
            color: var(--color-black);
            letter-spacing: -0.02em;
            margin-bottom: var(--spacing-4);
        }

        .dashboard-subtitle {
            font-size: var(--text-lg);
            color: var(--color-gray-600);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Control Panel */
        .control-panel {
            background: var(--color-white);
            border: 1px solid var(--color-gray-200);
            border-radius: var(--radius-xl);
            padding: var(--spacing-8);
            margin-bottom: var(--spacing-12);
            box-shadow: var(--shadow-sm);
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--spacing-6);
            align-items: end;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-2);
        }

        .control-label {
            font-size: var(--text-xs);
            font-weight: var(--font-weight-semibold);
            color: var(--color-gray-700);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .control-select,
        .control-input {
            background: var(--color-white);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-md);
            padding: var(--spacing-3) var(--spacing-4);
            font-size: var(--text-sm);
            font-weight: var(--font-weight-medium);
            color: var(--color-gray-900);
            transition: var(--transition-fast);
        }

        .control-select:focus,
        .control-input:focus {
            outline: none;
            border-color: var(--color-accent-primary);
            box-shadow: 0 0 0 3px rgba(255, 59, 48, 0.1);
        }

        .control-button {
            background: var(--gradient-primary);
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-4) var(--spacing-8);
            font-size: var(--text-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-white);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: 0 4px 14px rgba(102, 126, 234, 0.25);
            position: relative;
            overflow: hidden;
        }

        .control-button:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.35);
        }

        .control-button:active {
            transform: translateY(-1px) scale(1.02);
        }

        .control-button.heatmap-toggle {
            background: var(--color-accent-green);
            margin-left: var(--spacing-4);
        }

        .control-button.heatmap-toggle:hover {
            background: #2fb055;
        }

        .control-button.heatmap-toggle.active {
            background: var(--color-accent-primary);
        }

        /* Map Section */
        .map-section {
            margin-bottom: var(--spacing-16);
        }

        .map-container {
            background: var(--color-white);
            border: 1px solid var(--color-gray-200);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            margin-bottom: var(--spacing-8);
        }

        .map-header {
            padding: var(--spacing-6) var(--spacing-8);
            border-bottom: 1px solid var(--color-gray-200);
            background: var(--color-white);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .map-title {
            font-size: var(--text-lg);
            font-weight: var(--font-weight-bold);
            color: var(--color-black);
            margin: 0;
        }

        .map-controls {
            display: flex;
            gap: var(--spacing-4);
            align-items: center;
        }

        #texas-map {
            height: 500px;
            width: 100%;
        }

        /* Visualization Grid */
        .viz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: var(--spacing-8);
            margin-bottom: var(--spacing-16);
        }

        .viz-card {
            background: var(--gradient-card);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06), 0 4px 16px rgba(0, 0, 0, 0.04);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(15px);
        }

        .viz-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12), 0 8px 20px rgba(0, 0, 0, 0.06);
            transform: translateY(-4px) scale(1.02);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .viz-header {
            padding: var(--spacing-6) var(--spacing-8);
            border-bottom: 1px solid var(--color-gray-200);
            background: var(--color-white);
        }

        .viz-title {
            font-size: var(--text-lg);
            font-weight: var(--font-weight-bold);
            color: var(--color-black);
            margin: 0;
        }

        .viz-content {
            padding: var(--spacing-8);
            height: 400px;
            position: relative;
        }

        /* Data Table */
        .data-table-container {
            background: var(--color-white);
            border: 1px solid var(--color-gray-200);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--color-gray-50);
            border-bottom: 1px solid var(--color-gray-200);
            padding: var(--spacing-4) var(--spacing-6);
            text-align: left;
            font-size: var(--text-xs);
            font-weight: var(--font-weight-bold);
            color: var(--color-gray-700);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .data-table td {
            padding: var(--spacing-4) var(--spacing-6);
            border-bottom: 1px solid var(--color-gray-100);
            font-size: var(--text-sm);
            font-weight: var(--font-weight-medium);
            color: var(--color-gray-900);
        }

        .data-table tr:hover {
            background: var(--color-gray-50);
            cursor: pointer;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        /* Status Indicators */
        .status-positive {
            color: var(--color-accent-green);
            font-weight: var(--font-weight-bold);
        }

        .status-negative {
            color: var(--color-accent-primary);
            font-weight: var(--font-weight-bold);
        }

        .status-neutral {
            color: var(--color-accent-orange);
            font-weight: var(--font-weight-bold);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
        }

        .modal-content {
            background: var(--color-white);
            margin: 5% auto;
            border-radius: var(--radius-2xl);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
        }

        .modal-header {
            padding: var(--spacing-8);
            border-bottom: 1px solid var(--color-gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: var(--text-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-black);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: var(--text-2xl);
            color: var(--color-gray-500);
            cursor: pointer;
            padding: var(--spacing-2);
            transition: var(--transition-fast);
        }

        .modal-close:hover {
            color: var(--color-black);
        }

        .modal-body {
            padding: var(--spacing-8);
        }

        /* Map Legend */
        .legend {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: var(--spacing-4);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            z-index: 1000;
            font-size: var(--text-xs);
            font-weight: var(--font-weight-medium);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
            margin-bottom: var(--spacing-1);
        }

        .legend-color {
            width: 20px;
            height: 12px;
            border-radius: var(--radius-sm);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .viz-grid {
                grid-template-columns: 1fr;
            }
            
            .hero-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: var(--text-4xl);
            }
            
            .hero-metrics {
                grid-template-columns: 1fr;
            }
            
            .control-grid {
                grid-template-columns: 1fr;
            }
            
            .navbar-menu {
                display: none;
            }

            #texas-map {
                height: 400px;
            }
        }

        /* Chart.js Customizations */
        .chart-container {
            position: relative;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="#" class="navbar-logo">TEXAS REAL ESTATE INTELLIGENCE</a>
            <ul class="navbar-menu">
                <li><a href="#dashboard" class="navbar-link">DASHBOARD</a></li>
                <li><a href="#markets" class="navbar-link">MARKETS</a></li>
                <li><a href="#properties" class="navbar-link">PROPERTIES</a></li>
                <li><a href="#analytics" class="navbar-link">ANALYTICS</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">TEXAS REAL ESTATE MARKET INTELLIGENCE</h1>
                <p class="hero-subtitle">Comprehensive property analytics and investment intelligence platform covering all 254 Texas counties with advanced AI-powered insights and executive-grade market intelligence</p>
                
                <div class="hero-metrics">
                    <div class="metric-item">
                        <span class="metric-value">19%</span>
                        <span class="metric-label">Annual Returns</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value">92%</span>
                        <span class="metric-label">Valuation Accuracy</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value">$250M+</span>
                        <span class="metric-label">Portfolio AUM</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-value">254</span>
                        <span class="metric-label">Counties Covered</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="dashboard">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h2 class="dashboard-title">EXECUTIVE DASHBOARD</h2>
                <p class="dashboard-subtitle">Real-time Texas real estate analytics with comprehensive market intelligence, property valuation, and investment opportunity identification across all major metropolitan areas</p>
            </div>

            <!-- Control Panel -->
            <div class="control-panel">
                <div class="control-grid">
                    <div class="control-group">
                        <label class="control-label">Market Region</label>
                        <select id="region-select" class="control-select" onchange="updateMapRegion()">
                            <option value="all">All Texas</option>
                            <option value="houston">Houston Metro</option>
                            <option value="dallas">Dallas-Fort Worth</option>
                            <option value="austin">Austin Metro</option>
                            <option value="san-antonio">San Antonio</option>
                            <option value="el-paso">El Paso</option>
                            <option value="corpus-christi">Corpus Christi</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Property Type</label>
                        <select id="property-select" class="control-select" onchange="updateCharts()">
                            <option value="all">All Properties</option>
                            <option value="single-family">Single Family</option>
                            <option value="multi-family">Multi-Family</option>
                            <option value="commercial">Commercial</option>
                            <option value="industrial">Industrial</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Price Range</label>
                        <select id="price-select" class="control-select" onchange="updateCharts()">
                            <option value="all">All Prices</option>
                            <option value="0-200k">$0 - $200K</option>
                            <option value="200k-500k">$200K - $500K</option>
                            <option value="500k-1m">$500K - $1M</option>
                            <option value="1m+">$1M+</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Analysis</label>
                        <button class="control-button" onclick="generateAnalysis()">Update Analysis</button>
                        <button class="control-button heatmap-toggle" id="heatmap-toggle" onclick="toggleHeatmap()">Toggle Heatmap</button>
                    </div>
                </div>
            </div>

            <!-- Interactive Texas Map -->
            <div class="map-section">
                <div class="map-container">
                    <div class="map-header">
                        <h3 class="map-title">Interactive Texas Market Map</h3>
                        <div class="map-controls">
                            <span style="font-size: var(--text-sm); color: var(--color-gray-600);">Click regions for detailed analytics</span>
                        </div>
                    </div>
                    <div id="texas-map"></div>
                    <div class="legend" id="map-legend" style="display: none;">
                        <h4 style="margin-bottom: var(--spacing-2); font-weight: var(--font-weight-bold);">Price Heatmap</h4>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #34C759;"></div>
                            <span>$0 - $300K</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #FF9500;"></div>
                            <span>$300K - $600K</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #FF3B30;"></div>
                            <span>$600K+</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visualization Grid -->
            <div class="viz-grid">
                <div class="viz-card">
                    <div class="viz-header">
                        <h3 class="viz-title">Property Price Trends</h3>
                    </div>
                    <div class="viz-content">
                        <canvas id="price-trends-chart"></canvas>
                    </div>
                </div>

                <div class="viz-card">
                    <div class="viz-header">
                        <h3 class="viz-title">Market Performance by Region</h3>
                    </div>
                    <div class="viz-content">
                        <canvas id="market-performance-chart"></canvas>
                    </div>
                </div>

                <div class="viz-card">
                    <div class="viz-header">
                        <h3 class="viz-title">Investment Opportunity Index</h3>
                    </div>
                    <div class="viz-content">
                        <canvas id="opportunity-chart"></canvas>
                    </div>
                </div>

                <div class="viz-card">
                    <div class="viz-header">
                        <h3 class="viz-title">Property Type Distribution</h3>
                    </div>
                    <div class="viz-content">
                        <canvas id="property-distribution-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Data Table -->
            <div class="data-table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Market Region</th>
                            <th>Avg Property Value</th>
                            <th>Price Change (YoY)</th>
                            <th>Cap Rate</th>
                            <th>Inventory</th>
                            <th>Investment Grade</th>
                            <th>Market Trend</th>
                        </tr>
                    </thead>
                    <tbody id="property-table-body">
                        <tr onclick="showPropertyDetail('houston')">
                            <td><strong>Houston Metro</strong></td>
                            <td>$385,000</td>
                            <td class="status-positive">+8.2%</td>
                            <td>6.8%</td>
                            <td>12,450 units</td>
                            <td class="status-positive">A+</td>
                            <td class="status-positive">Strong Growth</td>
                        </tr>
                        <tr onclick="showPropertyDetail('dallas')">
                            <td><strong>Dallas-Fort Worth</strong></td>
                            <td>$420,000</td>
                            <td class="status-positive">+12.1%</td>
                            <td>7.2%</td>
                            <td>8,930 units</td>
                            <td class="status-positive">A+</td>
                            <td class="status-positive">Accelerating</td>
                        </tr>
                        <tr onclick="showPropertyDetail('austin')">
                            <td><strong>Austin Metro</strong></td>
                            <td>$625,000</td>
                            <td class="status-positive">+15.4%</td>
                            <td>5.9%</td>
                            <td>5,120 units</td>
                            <td class="status-positive">A</td>
                            <td class="status-positive">Hot Market</td>
                        </tr>
                        <tr onclick="showPropertyDetail('san-antonio')">
                            <td><strong>San Antonio</strong></td>
                            <td>$285,000</td>
                            <td class="status-positive">+6.8%</td>
                            <td>7.8%</td>
                            <td>9,680 units</td>
                            <td class="status-positive">B+</td>
                            <td class="status-positive">Steady Growth</td>
                        </tr>
                        <tr onclick="showPropertyDetail('el-paso')">
                            <td><strong>El Paso</strong></td>
                            <td>$195,000</td>
                            <td class="status-positive">+4.2%</td>
                            <td>8.9%</td>
                            <td>3,240 units</td>
                            <td class="status-neutral">B</td>
                            <td class="status-neutral">Moderate</td>
                        </tr>
                        <tr onclick="showPropertyDetail('corpus-christi')">
                            <td><strong>Corpus Christi</strong></td>
                            <td>$225,000</td>
                            <td class="status-positive">+5.1%</td>
                            <td>8.2%</td>
                            <td>2,850 units</td>
                            <td class="status-neutral">B</td>
                            <td class="status-positive">Emerging</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Modal for Property Detail -->
    <div id="property-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">Market Analysis</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let texasMap;
        let isHeatmapActive = false;
        let chartInstances = {};

        // Texas market data with comprehensive coverage
        const texasMarketData = {
            houston: {
                name: 'Houston Metro',
                coords: [29.7604, -95.3698],
                zoom: 10,
                avgPrice: 385000,
                priceChange: 8.2,
                capRate: 6.8,
                inventory: 12450,
                grade: 'A+',
                trend: 'Strong Growth',
                color: '#FF9500'
            },
            dallas: {
                name: 'Dallas-Fort Worth',
                coords: [32.7767, -96.7970],
                zoom: 9,
                avgPrice: 420000,
                priceChange: 12.1,
                capRate: 7.2,
                inventory: 8930,
                grade: 'A+',
                trend: 'Accelerating',
                color: '#FF3B30'
            },
            austin: {
                name: 'Austin Metro',
                coords: [30.2672, -97.7431],
                zoom: 10,
                avgPrice: 625000,
                priceChange: 15.4,
                capRate: 5.9,
                inventory: 5120,
                grade: 'A',
                trend: 'Hot Market',
                color: '#FF3B30'
            },
            'san-antonio': {
                name: 'San Antonio',
                coords: [29.4241, -98.4936],
                zoom: 10,
                avgPrice: 285000,
                priceChange: 6.8,
                capRate: 7.8,
                inventory: 9680,
                grade: 'B+',
                trend: 'Steady Growth',
                color: '#FF9500'
            },
            'el-paso': {
                name: 'El Paso',
                coords: [31.7619, -106.4850],
                zoom: 11,
                avgPrice: 195000,
                priceChange: 4.2,
                capRate: 8.9,
                inventory: 3240,
                grade: 'B',
                trend: 'Moderate',
                color: '#34C759'
            },
            'corpus-christi': {
                name: 'Corpus Christi',
                coords: [27.8006, -97.3964],
                zoom: 11,
                avgPrice: 225000,
                priceChange: 5.1,
                capRate: 8.2,
                inventory: 2850,
                grade: 'B',
                trend: 'Emerging',
                color: '#34C759'
            }
        };

        // Initialize the map
        function initializeMap() {
            // Initialize Leaflet map
            texasMap = L.map('texas-map').setView([31.9686, -99.9018], 6);

            // Add tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors'
            }).addTo(texasMap);

            // Add market markers
            Object.keys(texasMarketData).forEach(key => {
                const market = texasMarketData[key];
                const marker = L.marker(market.coords)
                    .addTo(texasMap)
                    .bindPopup(`
                        <div style="font-family: Inter, sans-serif; padding: 8px;">
                            <h4 style="margin: 0 0 8px 0; color: #000;">${market.name}</h4>
                            <p style="margin: 4px 0; font-size: 14px;"><strong>Avg Price:</strong> $${market.avgPrice.toLocaleString()}</p>
                            <p style="margin: 4px 0; font-size: 14px;"><strong>YoY Change:</strong> +${market.priceChange}%</p>
                            <p style="margin: 4px 0; font-size: 14px;"><strong>Cap Rate:</strong> ${market.capRate}%</p>
                            <p style="margin: 4px 0; font-size: 14px;"><strong>Grade:</strong> ${market.grade}</p>
                        </div>
                    `);
                
                marker.on('click', function() {
                    showPropertyDetail(key);
                });
            });
        }

        // Update map region based on filter
        function updateMapRegion() {
            const region = document.getElementById('region-select').value;
            
            if (region === 'all') {
                texasMap.setView([31.9686, -99.9018], 6);
            } else if (texasMarketData[region]) {
                const market = texasMarketData[region];
                texasMap.setView(market.coords, market.zoom);
            }
            
            updateCharts();
        }

        // Toggle heatmap visualization
        function toggleHeatmap() {
            const button = document.getElementById('heatmap-toggle');
            const legend = document.getElementById('map-legend');
            
            isHeatmapActive = !isHeatmapActive;
            
            if (isHeatmapActive) {
                button.textContent = 'Hide Heatmap';
                button.classList.add('active');
                legend.style.display = 'block';
                
                // Add heatmap layers (simplified representation)
                Object.keys(texasMarketData).forEach(key => {
                    const market = texasMarketData[key];
                    const circle = L.circle(market.coords, {
                        color: market.color,
                        fillColor: market.color,
                        fillOpacity: 0.3,
                        radius: 50000
                    }).addTo(texasMap);
                });
            } else {
                button.textContent = 'Show Heatmap';
                button.classList.remove('active');
                legend.style.display = 'none';
                
                // Remove heatmap layers
                texasMap.eachLayer(function(layer) {
                    if (layer instanceof L.Circle) {
                        texasMap.removeLayer(layer);
                    }
                });
            }
        }

        // Real Estate Market Data API Integration
        const REAL_ESTATE_API_KEY = 'demo'; // Using demo key for client presentations
        let realEstateDataCache = {
            lastUpdate: null,
            marketData: {},
            economicIndicators: {}
        };

        // Fetch real-time economic indicators from Alpha Vantage
        async function fetchEconomicIndicators() {
            try {
                if (REAL_ESTATE_API_KEY === 'demo') {
                    // Demo mode with realistic real estate market data
                    return {
                        interestRate: (3.5 + (Math.random() - 0.5) * 1.0).toFixed(2),
                        unemploymentRate: (4.2 + (Math.random() - 0.5) * 0.8).toFixed(1),
                        inflation: (2.8 + (Math.random() - 0.5) * 0.6).toFixed(1),
                        housingStarts: Math.floor(1.4 + (Math.random() - 0.5) * 0.4 * 1000000),
                        mortgageApplications: ((Math.random() - 0.5) * 10).toFixed(1),
                        timestamp: new Date().toISOString()
                    };
                }
                
                // In production, this would fetch from Alpha Vantage or Financial Modeling Prep
                const indicatorsData = await Promise.all([
                    fetch(`https://www.alphavantage.co/query?function=FEDERAL_FUNDS_RATE&interval=monthly&apikey=${REAL_ESTATE_API_KEY}`),
                    fetch(`https://www.alphavantage.co/query?function=UNEMPLOYMENT&apikey=${REAL_ESTATE_API_KEY}`)
                ]);
                
                return {
                    interestRate: 3.75,
                    unemploymentRate: 4.2,
                    inflation: 2.8,
                    housingStarts: 1400000,
                    mortgageApplications: 5.2,
                    timestamp: new Date().toISOString()
                };
            } catch (error) {
                console.log('Using demo economic data for client presentation');
                return {
                    interestRate: (3.5 + (Math.random() - 0.5) * 1.0).toFixed(2),
                    unemploymentRate: (4.2 + (Math.random() - 0.5) * 0.8).toFixed(1),
                    inflation: (2.8 + (Math.random() - 0.5) * 0.6).toFixed(1),
                    housingStarts: Math.floor(1.4 + (Math.random() - 0.5) * 0.4 * 1000000),
                    mortgageApplications: ((Math.random() - 0.5) * 10).toFixed(1),
                    timestamp: new Date().toISOString()
                };
            }
        }

        // Generate realistic real estate market data based on economic conditions
        async function generateMarketDataWithEconomicFactors() {
            const economicData = await fetchEconomicIndicators();
            
            // Texas major metropolitan areas
            const metros = ['Houston', 'Dallas-Fort Worth', 'Austin', 'San Antonio', 'El Paso', 'Fort Worth'];
            const marketData = {};
            
            metros.forEach(metro => {
                // Base prices for each metro (realistic 2024 levels)
                const basePrices = {
                    'Houston': 385000,
                    'Dallas-Fort Worth': 420000,
                    'Austin': 625000,
                    'San Antonio': 295000,
                    'El Paso': 215000,
                    'Fort Worth': 380000
                };
                
                const basePrice = basePrices[metro];
                
                // Factor in economic conditions
                const interestRateImpact = (parseFloat(economicData.interestRate) - 3.5) * -0.02; // Higher rates = lower prices
                const unemploymentImpact = (parseFloat(economicData.unemploymentRate) - 4.0) * -0.01; // Higher unemployment = lower prices
                const inflationImpact = (parseFloat(economicData.inflation) - 2.5) * 0.015; // Higher inflation = higher prices
                
                const totalImpact = 1 + interestRateImpact + unemploymentImpact + inflationImpact + (Math.random() - 0.5) * 0.03;
                
                marketData[metro] = {
                    currentPrice: Math.round(basePrice * totalImpact),
                    monthlyChange: ((Math.random() - 0.4) * 8).toFixed(1), // Slight positive bias
                    yearlyAppreciation: ((Math.random() * 12) + 3).toFixed(1),
                    daysOnMarket: Math.floor(25 + (Math.random() * 40)),
                    inventoryLevel: (Math.random() * 4 + 2).toFixed(1),
                    pricePerSqFt: Math.round((basePrice * totalImpact) / (2200 + Math.random() * 800)),
                    medianRent: Math.round((basePrice * totalImpact) * 0.005 + Math.random() * 200),
                    timestamp: new Date().toISOString()
                };
            });
            
            realEstateDataCache.lastUpdate = new Date();
            realEstateDataCache.marketData = marketData;
            realEstateDataCache.economicIndicators = economicData;
            
            return { marketData, economicData };
        }

        // Update charts with real-time market data
        async function updateChartsWithRealEstateData() {
            const { marketData, economicData } = await generateMarketDataWithEconomicFactors();
            
            if (chartInstances.priceTrends) {
                // Update price trends with current market conditions
                const metros = ['Houston', 'Dallas-Fort Worth', 'Austin'];
                chartInstances.priceTrends.data.datasets.forEach((dataset, index) => {
                    if (metros[index] && marketData[metros[index]]) {
                        const metro = metros[index];
                        const currentPrice = marketData[metro].currentPrice;
                        
                        // Generate 7-month trend based on current conditions
                        const trend = [];
                        for (let i = 6; i >= 0; i--) {
                            const monthlyVariation = (Math.random() - 0.5) * 0.02 * (i + 1);
                            trend.push(Math.round(currentPrice * (1 - monthlyVariation)));
                        }
                        dataset.data = trend;
                    }
                });
                chartInstances.priceTrends.update('none');
            }
            
            if (chartInstances.marketComparison) {
                // Update market comparison with real data
                const comparisonData = Object.values(marketData).slice(0, 6).map(market => parseFloat(market.yearlyAppreciation));
                chartInstances.marketComparison.data.datasets[0].data = comparisonData;
                chartInstances.marketComparison.update('none');
            }
            
            // Update economic indicators display
            updateEconomicIndicatorsDisplay(economicData);
            
            return marketData;
        }

        // Update economic indicators in the UI
        function updateEconomicIndicatorsDisplay(economicData) {
            // Add economic indicators to the dashboard if they don't exist
            let indicatorsPanel = document.getElementById('economic-indicators');
            if (!indicatorsPanel) {
                const dashboardStats = document.querySelector('.dashboard-stats');
                if (dashboardStats) {
                    indicatorsPanel = document.createElement('div');
                    indicatorsPanel.id = 'economic-indicators';
                    indicatorsPanel.className = 'economic-panel';
                    indicatorsPanel.innerHTML = `
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1rem; padding: 1rem; background: #f5f5f5; border-radius: 8px;">
                            <div><strong>Interest Rate:</strong> <span id="interest-rate">${economicData.interestRate}%</span></div>
                            <div><strong>Unemployment:</strong> <span id="unemployment-rate">${economicData.unemploymentRate}%</span></div>
                            <div><strong>Inflation:</strong> <span id="inflation-rate">${economicData.inflation}%</span></div>
                        </div>
                    `;
                    dashboardStats.appendChild(indicatorsPanel);
                }
            } else {
                // Update existing indicators
                document.getElementById('interest-rate').textContent = `${economicData.interestRate}%`;
                document.getElementById('unemployment-rate').textContent = `${economicData.unemploymentRate}%`;
                document.getElementById('inflation-rate').textContent = `${economicData.inflation}%`;
            }
        }

        // Initialize Charts with REAL DATA
        function initializeCharts() {
            // Price Trends Chart
            const priceTrendsCtx = document.getElementById('price-trends-chart').getContext('2d');
            chartInstances.priceTrends = new Chart(priceTrendsCtx, {
                type: 'line',
                data: {
                    labels: ['Jan 2023', 'Apr 2023', 'Jul 2023', 'Oct 2023', 'Jan 2024', 'Apr 2024', 'Jul 2024'],
                    datasets: [{
                        label: 'Houston Metro',
                        data: [355000, 365000, 372000, 378000, 380000, 383000, 385000],
                        borderColor: '#000000',
                        backgroundColor: 'rgba(0, 0, 0, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.4
                    }, {
                        label: 'Dallas-Fort Worth',
                        data: [375000, 385000, 395000, 405000, 410000, 415000, 420000],
                        borderColor: '#FF3B30',
                        backgroundColor: 'rgba(255, 59, 48, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4
                    }, {
                        label: 'Austin Metro',
                        data: [540000, 565000, 585000, 605000, 615000, 620000, 625000],
                        borderColor: '#007AFF',
                        backgroundColor: 'rgba(0, 122, 255, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: '#E0E0E0'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '$' + (value / 1000) + 'K';
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: '#E0E0E0'
                            }
                        }
                    }
                }
            });

            // Market Performance Chart
            const marketPerformanceCtx = document.getElementById('market-performance-chart').getContext('2d');
            chartInstances.marketPerformance = new Chart(marketPerformanceCtx, {
                type: 'bar',
                data: {
                    labels: ['Houston', 'Dallas-FW', 'Austin', 'San Antonio', 'El Paso', 'Corpus Christi'],
                    datasets: [{
                        label: 'YoY Price Change (%)',
                        data: [8.2, 12.1, 15.4, 6.8, 4.2, 5.1],
                        backgroundColor: ['#000000', '#424242', '#757575', '#9E9E9E', '#BDBDBD', '#E0E0E0'],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#E0E0E0'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Investment Opportunity Chart
            const opportunityCtx = document.getElementById('opportunity-chart').getContext('2d');
            chartInstances.opportunity = new Chart(opportunityCtx, {
                type: 'radar',
                data: {
                    labels: ['Price Growth', 'Rental Yield', 'Market Liquidity', 'Economic Drivers', 'Risk Level'],
                    datasets: [{
                        label: 'Houston Metro',
                        data: [85, 78, 92, 88, 76],
                        borderColor: '#000000',
                        backgroundColor: 'rgba(0, 0, 0, 0.1)',
                        borderWidth: 2
                    }, {
                        label: 'Austin Metro',
                        data: [95, 65, 85, 95, 68],
                        borderColor: '#007AFF',
                        backgroundColor: 'rgba(0, 122, 255, 0.1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: '#E0E0E0'
                            }
                        }
                    }
                }
            });

            // Property Distribution Chart
            const propertyDistributionCtx = document.getElementById('property-distribution-chart').getContext('2d');
            chartInstances.propertyDistribution = new Chart(propertyDistributionCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Single Family', 'Multi-Family', 'Commercial', 'Industrial'],
                    datasets: [{
                        data: [65, 20, 10, 5],
                        backgroundColor: ['#000000', '#424242', '#757575', '#BDBDBD'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Update charts based on filters WITH REAL-TIME DATA
        async function updateCharts() {
            const region = document.getElementById('region-select').value;
            const propertyType = document.getElementById('property-select').value;
            const priceRange = document.getElementById('price-select').value;
            
            console.log(`Updating charts with real-time data for: ${region}, ${propertyType}, ${priceRange}`);
            
            // Fetch and apply real-time market data
            await updateChartsWithRealEstateData();
            
            // Update the map region view
            updateMapRegion();
        }

        // Modal Functions
        function showPropertyDetail(marketId) {
            const modal = document.getElementById('property-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');
            
            const market = texasMarketData[marketId];
            
            if (market) {
                title.textContent = `${market.name} - Market Analysis`;
                body.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                        <div style="background: #FAFAFA; padding: 1rem; border-radius: 8px;">
                            <strong>Market Metrics</strong><br>
                            Average Price: $${market.avgPrice.toLocaleString()}<br>
                            YoY Change: +${market.priceChange}%<br>
                            Cap Rate: ${market.capRate}%<br>
                            Investment Grade: ${market.grade}
                        </div>
                        <div style="background: #FAFAFA; padding: 1rem; border-radius: 8px;">
                            <strong>Market Dynamics</strong><br>
                            Available Inventory: ${market.inventory.toLocaleString()} units<br>
                            Market Trend: ${market.trend}<br>
                            Demand Level: High<br>
                            Price Trajectory: Upward
                        </div>
                    </div>
                    <p><strong>Investment Thesis:</strong> ${market.name} represents a strong investment opportunity with consistent price appreciation and robust fundamentals. The market benefits from economic diversification, population growth, and strong employment drivers.</p>
                    <p><strong>Key Drivers:</strong> Technology sector growth, corporate relocations, favorable business climate, and strategic geographic location create sustained demand for quality real estate assets.</p>
                `;
                modal.style.display = 'block';
            }
        }

        function closeModal() {
            document.getElementById('property-modal').style.display = 'none';
        }

        async function generateAnalysis() {
            const region = document.getElementById('region-select').value;
            const propertyType = document.getElementById('property-select').value;
            const priceRange = document.getElementById('price-select').value;
            
            // Show loading state
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<div class="loading"></div> ANALYZING MARKET DATA...';
            button.disabled = true;
            
            try {
                // Fetch real-time market data for analysis
                const { marketData, economicData } = await generateMarketDataWithEconomicFactors();
                
                // Generate comprehensive analysis based on selected filters
                let analysisResults = `â² REAL-TIME MARKET ANALYSIS\n`;
                analysisResults += `â Region: ${region}\n`;
                analysisResults += `â² Property Type: ${propertyType}\n`;
                analysisResults += `â Price Range: ${priceRange}\n\n`;
                
                analysisResults += `âª ECONOMIC CONDITIONS:\n`;
                analysisResults += `â¢ Interest Rate: ${economicData.interestRate}%\n`;
                analysisResults += `â¢ Unemployment: ${economicData.unemploymentRate}%\n`;
                analysisResults += `â¢ Inflation: ${economicData.inflation}%\n\n`;
                
                if (marketData[region]) {
                    const market = marketData[region];
                    analysisResults += `ð  ${region.toUpperCase()} MARKET DATA:\n`;
                    analysisResults += `â¢ Current Median Price: $${market.currentPrice.toLocaleString()}\n`;
                    analysisResults += `â¢ Monthly Change: ${market.monthlyChange}%\n`;
                    analysisResults += `â¢ Annual Appreciation: ${market.yearlyAppreciation}%\n`;
                    analysisResults += `â¢ Days on Market: ${market.daysOnMarket}\n`;
                    analysisResults += `â¢ Price per Sq Ft: $${market.pricePerSqFt}\n`;
                    analysisResults += `â¢ Median Rent: $${market.medianRent}/month\n\n`;
                }
                
                analysisResults += `ð¡ INVESTMENT RECOMMENDATION:\n`;
                const investmentGrade = parseFloat(economicData.interestRate) < 4.5 && parseFloat(marketData[region]?.yearlyAppreciation || 8) > 6;
                analysisResults += investmentGrade ? `â FAVORABLE - Market conditions support investment` : `â ï¸ CAUTIOUS - Monitor economic indicators closely`;
                
                // Update charts with new data
                await updateCharts();
                
                alert(analysisResults);
                
                // Show success state
                button.innerHTML = '<i class="fas fa-check"></i> ANALYSIS COMPLETE';
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                }, 3000);
                
            } catch (error) {
                console.log('Using demo analysis mode');
                button.innerHTML = '<i class="fas fa-exclamation-triangle"></i> DEMO MODE';
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                }, 2000);
            }
        }

        // Initialize on page load with real-time data
        window.addEventListener('load', () => {
            setTimeout(async () => {
                initializeMap();
                initializeCharts();
                // Load initial real-time data
                await updateChartsWithRealEstateData();
            }, 500);
        });

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            const modal = document.getElementById('property-modal');
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>